/* GitHub Bot Comment Collapser Styles */

/* Toggle header for collapsed comments */
.gbc-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bgColor-muted, #f6f8fa);
  border: 1px solid var(--borderColor-default, #d0d7de);
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  line-height: 1.4;
  color: var(--fgColor-muted, #656d76);
  user-select: none;
  transition: background-color 0.15s ease;
}

.gbc-toggle:hover {
  background: var(--bgColor-neutral-muted, #eaeef2);
}

/* All items in toggle should align to baseline */
.gbc-toggle > span {
  display: inline-flex;
  align-items: center;
  line-height: 1;
}

.gbc-icon {
  font-size: 10px;
  width: 10px;
  height: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--fgColor-muted, #656d76);
  transition: transform 0.15s ease;
}

.gbc-type-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  color: var(--fgColor-muted, #656d76);
}

.gbc-label {
  background: var(--bgColor-neutral-muted, #eaeef2);
  border: 1px solid var(--borderColor-default, #d0d7de);
  border-radius: 2em;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 500;
  line-height: 1.4;
  color: var(--fgColor-muted, #656d76);
}

/* Review label - purple tint */
.gbc-label-review {
  background: var(--bgColor-done-muted, #fbefff);
  border-color: var(--borderColor-done-muted, #c297ff66);
  color: var(--fgColor-done, #8250df);
}

/* Comment label - default gray */
.gbc-label-comment {
  background: var(--bgColor-neutral-muted, #eaeef2);
  border-color: var(--borderColor-default, #d0d7de);
  color: var(--fgColor-muted, #656d76);
}

.gbc-author {
  font-weight: 600;
  color: var(--fgColor-default, #1f2328);
}

.gbc-meta {
  color: var(--fgColor-muted, #656d76);
}

.gbc-time {
  color: var(--fgColor-muted, #656d76);
  font-size: 11px;
}

.gbc-hint {
  margin-left: auto;
  font-size: 11px;
  color: var(--fgColor-muted, #656d76);
  opacity: 0;
  transition: opacity 0.15s ease;
}

.gbc-toggle:hover .gbc-hint {
  opacity: 1;
}

/* Collapsed state - hide comment content */
.gbc-collapsed > *:not(.gbc-toggle) {
  display: none !important;
}

.gbc-collapsed > .gbc-toggle {
  display: flex !important;
  margin: 8px 0;
}

/* Expanded state - show toggle at top */
[data-gbc-processed='true']:not(.gbc-collapsed) > .gbc-toggle {
  margin-bottom: 0;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom: none;
}

[data-gbc-processed='true']:not(.gbc-collapsed) > .gbc-toggle + * {
  border-top-left-radius: 0 !important;
  border-top-right-radius: 0 !important;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .gbc-toggle {
    background: var(--bgColor-muted, #161b22);
    border-color: var(--borderColor-default, #30363d);
    color: var(--fgColor-muted, #8b949e);
  }

  .gbc-toggle:hover {
    background: var(--bgColor-neutral-muted, #21262d);
  }

  .gbc-label {
    background: var(--bgColor-neutral-muted, #21262d);
    border-color: var(--borderColor-default, #30363d);
    color: var(--fgColor-muted, #8b949e);
  }

  .gbc-label-review {
    background: var(--bgColor-done-muted, #2d1f3d);
    border-color: var(--borderColor-done-muted, #a371f766);
    color: var(--fgColor-done, #a371f7);
  }

  .gbc-label-comment {
    background: var(--bgColor-neutral-muted, #21262d);
    border-color: var(--borderColor-default, #30363d);
    color: var(--fgColor-muted, #8b949e);
  }

  .gbc-type-icon {
    color: var(--fgColor-muted, #8b949e);
  }

  .gbc-author {
    color: var(--fgColor-default, #e6edf3);
  }
}

/* Animation for expand/collapse */
[data-gbc-processed='true'] {
  transition: max-height 0.2s ease;
}

/* Ensure proper stacking */
.gbc-toggle {
  position: relative;
  z-index: 1;
}

/* ========== Sidebar Widget ========== */

.gbc-sidebar-widget {
  padding: 16px;
  margin-bottom: 16px;
  background: var(--bgColor-muted, #f6f8fa);
  border: 1px solid var(--borderColor-default, #d0d7de);
  border-radius: 6px;
}

.gbc-sidebar-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  font-weight: 600;
  color: var(--fgColor-default, #1f2328);
}

.gbc-sidebar-icon {
  display: flex;
  align-items: center;
  color: var(--fgColor-muted, #656d76);
}

.gbc-sidebar-title {
  flex: 1;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.gbc-sidebar-count {
  background: var(--bgColor-neutral-muted, #eaeef2);
  border-radius: 10px;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 500;
  color: var(--fgColor-muted, #656d76);
}

.gbc-sidebar-status {
  font-size: 12px;
  color: var(--fgColor-muted, #656d76);
  margin-bottom: 12px;
}

.gbc-sidebar-buttons {
  display: flex;
  gap: 8px;
}

.gbc-btn {
  flex: 1;
  padding: 5px 10px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  border: 1px solid var(--borderColor-default, #d0d7de);
  background: var(--bgColor-default, #ffffff);
  color: var(--fgColor-default, #1f2328);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.gbc-btn:hover:not(:disabled) {
  background: var(--bgColor-neutral-muted, #eaeef2);
}

.gbc-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.gbc-btn-collapse {
  background: var(--bgColor-accent-muted, #ddf4ff);
  border-color: var(--borderColor-accent-muted, #54aeff66);
  color: var(--fgColor-accent, #0969da);
}

.gbc-btn-collapse:hover:not(:disabled) {
  background: var(--bgColor-accent-emphasis, #0969da);
  color: var(--fgColor-onEmphasis, #ffffff);
}

/* Dark mode for sidebar */
@media (prefers-color-scheme: dark) {
  .gbc-sidebar-widget {
    background: var(--bgColor-muted, #161b22);
    border-color: var(--borderColor-default, #30363d);
  }

  .gbc-sidebar-header {
    color: var(--fgColor-default, #e6edf3);
  }

  .gbc-sidebar-count {
    background: var(--bgColor-neutral-muted, #21262d);
    color: var(--fgColor-muted, #8b949e);
  }

  .gbc-btn {
    background: var(--bgColor-default, #0d1117);
    border-color: var(--borderColor-default, #30363d);
    color: var(--fgColor-default, #e6edf3);
  }

  .gbc-btn:hover:not(:disabled) {
    background: var(--bgColor-neutral-muted, #21262d);
  }

  .gbc-btn-collapse {
    background: var(--bgColor-accent-muted, #388bfd26);
    border-color: var(--borderColor-accent-muted, #388bfd66);
    color: var(--fgColor-accent, #58a6ff);
  }

  .gbc-btn-collapse:hover:not(:disabled) {
    background: var(--bgColor-accent-emphasis, #1f6feb);
    color: var(--fgColor-onEmphasis, #ffffff);
  }
}
